var Xn=Object.defineProperty;var Zn=(e,r,t)=>r in e?Xn(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var E=(e,r,t)=>Zn(e,typeof r!="symbol"?r+"":r,t);import{g as Yn,c as Y,j as Qn}from"./index-BPVy-DUg.js";var R={},br=function(e,r){return br=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},br(e,r)};function ln(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");br(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Q=function(){return Q=Object.assign||function(r){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},Q.apply(this,arguments)};function fn(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);return t}function dn(e,r,t,n){var o=arguments.length,a=o<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,r,t,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(o<3?i(a):o>3?i(r,t,a):i(r,t))||a);return o>3&&a&&Object.defineProperty(r,t,a),a}function hn(e,r){return function(t,n){r(t,n,e)}}function _n(e,r,t,n,o,a){function i(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var u=n.kind,c=u==="getter"?"get":u==="setter"?"set":"value",s=!r&&e?n.static?e:e.prototype:null,l=r||(s?Object.getOwnPropertyDescriptor(s,n.name):{}),f,h=!1,d=t.length-1;d>=0;d--){var v={};for(var _ in n)v[_]=_==="access"?{}:n[_];for(var _ in n.access)v.access[_]=n.access[_];v.addInitializer=function(b){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(b||null))};var y=(0,t[d])(u==="accessor"?{get:l.get,set:l.set}:l[c],v);if(u==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(f=i(y.get))&&(l.get=f),(f=i(y.set))&&(l.set=f),(f=i(y.init))&&o.unshift(f)}else(f=i(y))&&(u==="field"?o.unshift(f):l[c]=f)}s&&Object.defineProperty(s,n.name,l),h=!0}function vn(e,r,t){for(var n=arguments.length>2,o=0;o<r.length;o++)t=n?r[o].call(e,t):r[o].call(e);return n?t:void 0}function yn(e){return typeof e=="symbol"?e:"".concat(e)}function pn(e,r,t){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:t?"".concat(t," ",r):r})}function bn(e,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,r)}function gn(e,r,t,n){function o(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function u(l){try{s(n.next(l))}catch(f){i(f)}}function c(l){try{s(n.throw(l))}catch(f){i(f)}}function s(l){l.done?a(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})}function wn(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(a=s[0]&2?o.return:s[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;switch(o=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){t.label=s[1];break}if(s[0]===6&&t.label<a[1]){t.label=a[1],a=s;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(s);break}a[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}var re=Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]};function mn(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&re(r,e,t)}function ee(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function wr(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,a=[],i;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(u){i={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(i)throw i.error}}return a}function On(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(wr(arguments[r]));return e}function qn(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;for(var n=Array(e),o=0,r=0;r<t;r++)for(var a=arguments[r],i=0,u=a.length;i<u;i++,o++)n[o]=a[i];return n}function Cn(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,a;n<o;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return e.concat(a||Array.prototype.slice.call(r))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function En(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(d){return function(v){return Promise.resolve(v).then(d,f)}}function u(d,v){n[d]&&(o[d]=function(_){return new Promise(function(y,b){a.push([d,_,y,b])>1||c(d,_)})},v&&(o[d]=v(o[d])))}function c(d,v){try{s(n[d](v))}catch(_){h(a[0][3],_)}}function s(d){d.value instanceof S?Promise.resolve(d.value.v).then(l,f):h(a[0][2],d)}function l(d){c("next",d)}function f(d){c("throw",d)}function h(d,v){d(v),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Rn(e){var r,t;return r={},n("next"),n("throw",function(o){throw o}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(o,a){r[o]=e[o]?function(i){return(t=!t)?{value:S(e[o](i)),done:!1}:a?a(i):i}:a}}function Tn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof ee=="function"?ee(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=e[a]&&function(i){return new Promise(function(u,c){i=e[a](i),o(u,c,i.done,i.value)})}}function o(a,i,u,c){Promise.resolve(c).then(function(s){a({value:s,done:u})},i)}}function Pn(e,r){return Object.defineProperty?Object.defineProperty(e,"raw",{value:r}):e.raw=r,e}var ea=Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r},gr=function(e){return gr=Object.getOwnPropertyNames||function(r){var t=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[t.length]=n);return t},gr(e)};function Sn(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t=gr(e),n=0;n<t.length;n++)t[n]!=="default"&&re(r,e,t[n]);return ea(r,e),r}function jn(e){return e&&e.__esModule?e:{default:e}}function In(e,r,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?e!==r||!n:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(e):n?n.value:r.get(e)}function Mn(e,r,t,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?e!==r||!o:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,t):o?o.value=t:r.set(e,t),t}function Bn(e,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?r===e:e.has(r)}function An(e,r,t){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var n,o;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],t&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:r,dispose:n,async:t})}else t&&e.stack.push({async:!0});return r}var ra=typeof SuppressedError=="function"?SuppressedError:function(e,r,t){var n=new Error(t);return n.name="SuppressedError",n.error=e,n.suppressed=r,n};function Fn(e){function r(a){e.error=e.hasError?new ra(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var t,n=0;function o(){for(;t=e.stack.pop();)try{if(!t.async&&n===1)return n=0,e.stack.push(t),Promise.resolve().then(o);if(t.dispose){var a=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(a).then(o,function(i){return r(i),o()})}else n|=1}catch(i){r(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function Dn(e,r){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,o,a,i){return n?r?".jsx":".js":o&&(!a||!i)?t:o+a+"."+i.toLowerCase()+"js"}):e}const ta={__extends:ln,__assign:Q,__rest:fn,__decorate:dn,__param:hn,__esDecorate:_n,__runInitializers:vn,__propKey:yn,__setFunctionName:pn,__metadata:bn,__awaiter:gn,__generator:wn,__createBinding:re,__exportStar:mn,__values:ee,__read:wr,__spread:On,__spreadArrays:qn,__spreadArray:Cn,__await:S,__asyncGenerator:En,__asyncDelegator:Rn,__asyncValues:Tn,__makeTemplateObject:Pn,__importStar:Sn,__importDefault:jn,__classPrivateFieldGet:In,__classPrivateFieldSet:Mn,__classPrivateFieldIn:Bn,__addDisposableResource:An,__disposeResources:Fn,__rewriteRelativeImportExtension:Dn},na=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:An,get __assign(){return Q},__asyncDelegator:Rn,__asyncGenerator:En,__asyncValues:Tn,__await:S,__awaiter:gn,__classPrivateFieldGet:In,__classPrivateFieldIn:Bn,__classPrivateFieldSet:Mn,__createBinding:re,__decorate:dn,__disposeResources:Fn,__esDecorate:_n,__exportStar:mn,__extends:ln,__generator:wn,__importDefault:jn,__importStar:Sn,__makeTemplateObject:Pn,__metadata:bn,__param:hn,__propKey:yn,__read:wr,__rest:fn,__rewriteRelativeImportExtension:Dn,__runInitializers:vn,__setFunctionName:pn,__spread:On,__spreadArray:Cn,__spreadArrays:qn,__values:ee,default:ta},Symbol.toStringTag,{value:"Module"})),C=Yn(na);var te={};Object.defineProperty(te,"__esModule",{value:!0});te.NavigationTarget=void 0;te.NavigationTarget={ContentView:"contentView",ContentEdit:"contentEdit",ContentList:"contentList",SpaceView:"spaceView",Module:"module",UserProfile:"userProfile",Dashboard:"dashboard",Issue:"issue",ProjectSettingsDetails:"projectSettingsDetails"};var se={},j={},I={},M={},Er;function g(){if(Er)return M;Er=1,Object.defineProperty(M,"__esModule",{value:!0}),M.BridgeAPIError=void 0;class e extends Error{}return M.BridgeAPIError=e,M}var Rr;function p(){if(Rr)return I;Rr=1,Object.defineProperty(I,"__esModule",{value:!0}),I.getCallBridge=void 0;const e=g();function r(n){return!!(n!=null&&n.callBridge)}const t=()=>{if(!r(window.__bridge))throw new e.BridgeAPIError(`
      Unable to establish a connection with the Custom UI bridge.
      If you are trying to run your app locally, Forge apps only work in the context of Atlassian products. Refer to https://go.atlassian.com/forge-tunneling-with-custom-ui for how to tunnel when using a local development server.
    `);return window.__bridge.callBridge};return I.getCallBridge=t,I}var B={},Tr;function kn(){if(Tr)return B;Tr=1,Object.defineProperty(B,"__esModule",{value:!0}),B.withRateLimiter=void 0;const e=g(),r=(t,n,o,a)=>{let i=Date.now(),u=0;return async(...c)=>{const s=Date.now();if(s-i>o&&(i=s,u=0),u>=n)throw new e.BridgeAPIError(a||"Too many invocations.");return u=u+1,t(...c)}};return B.withRateLimiter=r,B}var Pr;function aa(){if(Pr)return j;Pr=1,Object.defineProperty(j,"__esModule",{value:!0}),j.invoke=void 0;const e=p(),r=g(),t=kn(),n=(0,e.getCallBridge)(),o=i=>{if(i&&Object.values(i).some(u=>typeof u=="function"))throw new r.BridgeAPIError("Passing functions as part of the payload is not supported!")},a=(i,u)=>{if(typeof i!="string")throw new r.BridgeAPIError("functionKey must be a string!");return o(u),n("invoke",{functionKey:i,payload:u})};return j.invoke=(0,t.withRateLimiter)(a,500,1e3*25,"Resolver calls are rate limited at 500req/25s"),j}var Sr;function oa(){return Sr||(Sr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),C.__exportStar(aa(),e)}(se)),se}var ue={},A={},ce={},jr;function $n(){return jr||(jr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._invokeEndpointFn=e.InvokeType=void 0;const r=p(),t=g(),n=kn(),o=500,a=25,i=1e3*a;(function(f){f.REMOTE="Remote",f.SERVICE="Container"})(e.InvokeType||(e.InvokeType={}));const u=(0,r.getCallBridge)(),c=f=>{if(f&&Object.values(f).some(h=>typeof h=="function"))throw new t.BridgeAPIError("Passing functions as part of the payload is not supported!")},s=f=>async h=>{c(h);const d={...h,invokeType:`ui-${f.toLowerCase()}-fetch`},v=await u("invoke",d),{success:_,payload:y,error:b}=v??{},w={..._?y:b};if(w&&w.headers)for(const ie in w.headers)Array.isArray(w.headers[ie])&&(w.headers[ie]=w.headers[ie].join(","));return w},l=f=>{const h=s(f);return(0,n.withRateLimiter)(h,o,i,`${f} invocation calls are rate limited at ${o}/${a}s`)};e._invokeEndpointFn=l}(ce)),ce}var Ir;function ia(){if(Ir)return A;Ir=1,Object.defineProperty(A,"__esModule",{value:!0}),A.invokeRemote=void 0;const e=$n(),r=t=>(0,e._invokeEndpointFn)(e.InvokeType.REMOTE)(t);return A.invokeRemote=r,A}var F={},Mr;function sa(){if(Mr)return F;Mr=1,Object.defineProperty(F,"__esModule",{value:!0}),F.invokeService=void 0;const e=$n(),r=t=>(0,e._invokeEndpointFn)(e.InvokeType.SERVICE)(t);return F.invokeService=r,F}var Br;function ua(){return Br||(Br=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const r=C;r.__exportStar(ia(),e),r.__exportStar(sa(),e)}(ue)),ue}var le={},D={},k={},Ar;function ca(){if(Ar)return k;Ar=1,Object.defineProperty(k,"__esModule",{value:!0}),k.submit=void 0;const e=p(),r=g(),t=(0,e.getCallBridge)(),n=async o=>{if(await t("submit",o)===!1)throw new r.BridgeAPIError("this resource's view is not submittable.")};return k.submit=n,k}var $={},Fr;function la(){if(Fr)return $;Fr=1,Object.defineProperty($,"__esModule",{value:!0}),$.close=void 0;const e=p(),r=g(),t=(0,e.getCallBridge)(),n=async o=>{try{if(await t("close",o)===!1)throw new r.BridgeAPIError("this resource's view is not closable.")}catch{throw new r.BridgeAPIError("this resource's view is not closable.")}};return $.close=n,$}var N={},Dr;function fa(){if(Dr)return N;Dr=1,Object.defineProperty(N,"__esModule",{value:!0}),N.refresh=void 0;const e=p(),r=g(),t=(0,e.getCallBridge)(),n=async o=>{if(await t("refresh",o)===!1)throw new r.BridgeAPIError("this resource's view is not refreshable.")};return N.refresh=n,N}var L={},kr;function da(){if(kr)return L;kr=1,Object.defineProperty(L,"__esModule",{value:!0}),L.createHistory=void 0;const r=(0,p().getCallBridge)(),t=async()=>{const n=await r("createHistory");return n.listen(o=>{n.location=o}),n};return L.createHistory=t,L}var G={},fe={},m={},$r;function Nn(){return $r||($r=1,Object.defineProperty(m,"__esModule",{value:!0}),m.FORGE_SUPPORTED_LOCALE_CODES=m.I18N_BUNDLE_FOLDER_NAME=m.I18N_INFO_FILE_NAME=void 0,m.I18N_INFO_FILE_NAME="i18n-info.json",m.I18N_BUNDLE_FOLDER_NAME="__LOCALES__",m.FORGE_SUPPORTED_LOCALE_CODES=["zh-CN","zh-TW","cs-CZ","da-DK","nl-NL","en-US","en-GB","et-EE","fi-FI","fr-FR","de-DE","hu-HU","is-IS","it-IT","ja-JP","ko-KR","no-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","tr-TR","es-ES","sv-SE"]),m}var T={},Nr;function ha(){if(Nr)return T;Nr=1,Object.defineProperty(T,"__esModule",{value:!0}),T.TranslationsGetter=T.TranslationGetterError=void 0;const e=(n,o)=>{n.includes(o)||n.push(o)};class r extends Error{constructor(o){super(o),this.name="TranslationGetterError"}}T.TranslationGetterError=r;class t{constructor(o){E(this,"resourcesAccessor");E(this,"i18nInfoConfig",null);E(this,"translationResources",new Map);this.resourcesAccessor=o}async getTranslations(o,a={fallback:!0}){const i=await this.getI18nInfoConfig(),{fallback:u}=a;if(!u){let c;return i.locales.includes(o)&&(c=await this.getTranslationResource(o)),{translations:c??null,locale:o}}for(const c of this.getLocaleLookupOrder(o,i)){const s=await this.getTranslationResource(c);if(s)return{translations:s,locale:c}}return{translations:null,locale:o}}async getTranslationsByLocaleLookupOrder(o){const a=await this.getI18nInfoConfig(),i=this.getLocaleLookupOrder(o,a);return await Promise.all(i.map(async u=>{const c=await this.getTranslationResource(u);return{locale:u,translations:c}}))}reset(){this.i18nInfoConfig=null,this.translationResources.clear()}async getTranslationResource(o){let a=this.translationResources.get(o);if(!a)try{a=await this.resourcesAccessor.getTranslationResource(o),this.translationResources.set(o,a)}catch(i){throw i instanceof r?i:new r(`Failed to get translation resource for locale: ${o}`)}return a}async getI18nInfoConfig(){if(!this.i18nInfoConfig)try{this.i18nInfoConfig=await this.resourcesAccessor.getI18nInfoConfig()}catch(o){throw o instanceof r?o:new r("Failed to get i18n info config")}return this.i18nInfoConfig}getLocaleLookupOrder(o,a){const{locales:i,fallback:u}=a,c=[o],s=u[o];return s&&Array.isArray(s)&&s.length>0&&c.push(...s),e(c,a.fallback.default),c.filter(l=>i.includes(l))}}return T.TranslationsGetter=t,T}var H={},de={},he,Lr;function mr(){if(Lr)return he;Lr=1;var e=Array.isArray;return he=e,he}var _e,Gr;function _a(){if(Gr)return _e;Gr=1;var e=typeof Y=="object"&&Y&&Y.Object===Object&&Y;return _e=e,_e}var ve,Hr;function Or(){if(Hr)return ve;Hr=1;var e=_a(),r=typeof self=="object"&&self&&self.Object===Object&&self,t=e||r||Function("return this")();return ve=t,ve}var ye,Vr;function qr(){if(Vr)return ye;Vr=1;var e=Or(),r=e.Symbol;return ye=r,ye}var pe,zr;function va(){if(zr)return pe;zr=1;var e=qr(),r=Object.prototype,t=r.hasOwnProperty,n=r.toString,o=e?e.toStringTag:void 0;function a(i){var u=t.call(i,o),c=i[o];try{i[o]=void 0;var s=!0}catch{}var l=n.call(i);return s&&(u?i[o]=c:delete i[o]),l}return pe=a,pe}var be,Ur;function ya(){if(Ur)return be;Ur=1;var e=Object.prototype,r=e.toString;function t(n){return r.call(n)}return be=t,be}var ge,xr;function Ln(){if(xr)return ge;xr=1;var e=qr(),r=va(),t=ya(),n="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function i(u){return u==null?u===void 0?o:n:a&&a in Object(u)?r(u):t(u)}return ge=i,ge}var we,Kr;function pa(){if(Kr)return we;Kr=1;function e(r){return r!=null&&typeof r=="object"}return we=e,we}var me,Jr;function Cr(){if(Jr)return me;Jr=1;var e=Ln(),r=pa(),t="[object Symbol]";function n(o){return typeof o=="symbol"||r(o)&&e(o)==t}return me=n,me}var Oe,Wr;function ba(){if(Wr)return Oe;Wr=1;var e=mr(),r=Cr(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function o(a,i){if(e(a))return!1;var u=typeof a;return u=="number"||u=="symbol"||u=="boolean"||a==null||r(a)?!0:n.test(a)||!t.test(a)||i!=null&&a in Object(i)}return Oe=o,Oe}var qe,Xr;function Gn(){if(Xr)return qe;Xr=1;function e(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}return qe=e,qe}var Ce,Zr;function ga(){if(Zr)return Ce;Zr=1;var e=Ln(),r=Gn(),t="[object AsyncFunction]",n="[object Function]",o="[object GeneratorFunction]",a="[object Proxy]";function i(u){if(!r(u))return!1;var c=e(u);return c==n||c==o||c==t||c==a}return Ce=i,Ce}var Ee,Yr;function wa(){if(Yr)return Ee;Yr=1;var e=Or(),r=e["__core-js_shared__"];return Ee=r,Ee}var Re,Qr;function ma(){if(Qr)return Re;Qr=1;var e=wa(),r=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!r&&r in n}return Re=t,Re}var Te,et;function Oa(){if(et)return Te;et=1;var e=Function.prototype,r=e.toString;function t(n){if(n!=null){try{return r.call(n)}catch{}try{return n+""}catch{}}return""}return Te=t,Te}var Pe,rt;function qa(){if(rt)return Pe;rt=1;var e=ga(),r=ma(),t=Gn(),n=Oa(),o=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,u=Object.prototype,c=i.toString,s=u.hasOwnProperty,l=RegExp("^"+c.call(s).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!t(h)||r(h))return!1;var d=e(h)?l:a;return d.test(n(h))}return Pe=f,Pe}var Se,tt;function Ca(){if(tt)return Se;tt=1;function e(r,t){return r==null?void 0:r[t]}return Se=e,Se}var je,nt;function Hn(){if(nt)return je;nt=1;var e=qa(),r=Ca();function t(n,o){var a=r(n,o);return e(a)?a:void 0}return je=t,je}var Ie,at;function ne(){if(at)return Ie;at=1;var e=Hn(),r=e(Object,"create");return Ie=r,Ie}var Me,ot;function Ea(){if(ot)return Me;ot=1;var e=ne();function r(){this.__data__=e?e(null):{},this.size=0}return Me=r,Me}var Be,it;function Ra(){if(it)return Be;it=1;function e(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}return Be=e,Be}var Ae,st;function Ta(){if(st)return Ae;st=1;var e=ne(),r="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function o(a){var i=this.__data__;if(e){var u=i[a];return u===r?void 0:u}return n.call(i,a)?i[a]:void 0}return Ae=o,Ae}var Fe,ut;function Pa(){if(ut)return Fe;ut=1;var e=ne(),r=Object.prototype,t=r.hasOwnProperty;function n(o){var a=this.__data__;return e?a[o]!==void 0:t.call(a,o)}return Fe=n,Fe}var De,ct;function Sa(){if(ct)return De;ct=1;var e=ne(),r="__lodash_hash_undefined__";function t(n,o){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=e&&o===void 0?r:o,this}return De=t,De}var ke,lt;function ja(){if(lt)return ke;lt=1;var e=Ea(),r=Ra(),t=Ta(),n=Pa(),o=Sa();function a(i){var u=-1,c=i==null?0:i.length;for(this.clear();++u<c;){var s=i[u];this.set(s[0],s[1])}}return a.prototype.clear=e,a.prototype.delete=r,a.prototype.get=t,a.prototype.has=n,a.prototype.set=o,ke=a,ke}var $e,ft;function Ia(){if(ft)return $e;ft=1;function e(){this.__data__=[],this.size=0}return $e=e,$e}var Ne,dt;function Ma(){if(dt)return Ne;dt=1;function e(r,t){return r===t||r!==r&&t!==t}return Ne=e,Ne}var Le,ht;function ae(){if(ht)return Le;ht=1;var e=Ma();function r(t,n){for(var o=t.length;o--;)if(e(t[o][0],n))return o;return-1}return Le=r,Le}var Ge,_t;function Ba(){if(_t)return Ge;_t=1;var e=ae(),r=Array.prototype,t=r.splice;function n(o){var a=this.__data__,i=e(a,o);if(i<0)return!1;var u=a.length-1;return i==u?a.pop():t.call(a,i,1),--this.size,!0}return Ge=n,Ge}var He,vt;function Aa(){if(vt)return He;vt=1;var e=ae();function r(t){var n=this.__data__,o=e(n,t);return o<0?void 0:n[o][1]}return He=r,He}var Ve,yt;function Fa(){if(yt)return Ve;yt=1;var e=ae();function r(t){return e(this.__data__,t)>-1}return Ve=r,Ve}var ze,pt;function Da(){if(pt)return ze;pt=1;var e=ae();function r(t,n){var o=this.__data__,a=e(o,t);return a<0?(++this.size,o.push([t,n])):o[a][1]=n,this}return ze=r,ze}var Ue,bt;function ka(){if(bt)return Ue;bt=1;var e=Ia(),r=Ba(),t=Aa(),n=Fa(),o=Da();function a(i){var u=-1,c=i==null?0:i.length;for(this.clear();++u<c;){var s=i[u];this.set(s[0],s[1])}}return a.prototype.clear=e,a.prototype.delete=r,a.prototype.get=t,a.prototype.has=n,a.prototype.set=o,Ue=a,Ue}var xe,gt;function $a(){if(gt)return xe;gt=1;var e=Hn(),r=Or(),t=e(r,"Map");return xe=t,xe}var Ke,wt;function Na(){if(wt)return Ke;wt=1;var e=ja(),r=ka(),t=$a();function n(){this.size=0,this.__data__={hash:new e,map:new(t||r),string:new e}}return Ke=n,Ke}var Je,mt;function La(){if(mt)return Je;mt=1;function e(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}return Je=e,Je}var We,Ot;function oe(){if(Ot)return We;Ot=1;var e=La();function r(t,n){var o=t.__data__;return e(n)?o[typeof n=="string"?"string":"hash"]:o.map}return We=r,We}var Xe,qt;function Ga(){if(qt)return Xe;qt=1;var e=oe();function r(t){var n=e(this,t).delete(t);return this.size-=n?1:0,n}return Xe=r,Xe}var Ze,Ct;function Ha(){if(Ct)return Ze;Ct=1;var e=oe();function r(t){return e(this,t).get(t)}return Ze=r,Ze}var Ye,Et;function Va(){if(Et)return Ye;Et=1;var e=oe();function r(t){return e(this,t).has(t)}return Ye=r,Ye}var Qe,Rt;function za(){if(Rt)return Qe;Rt=1;var e=oe();function r(t,n){var o=e(this,t),a=o.size;return o.set(t,n),this.size+=o.size==a?0:1,this}return Qe=r,Qe}var er,Tt;function Ua(){if(Tt)return er;Tt=1;var e=Na(),r=Ga(),t=Ha(),n=Va(),o=za();function a(i){var u=-1,c=i==null?0:i.length;for(this.clear();++u<c;){var s=i[u];this.set(s[0],s[1])}}return a.prototype.clear=e,a.prototype.delete=r,a.prototype.get=t,a.prototype.has=n,a.prototype.set=o,er=a,er}var rr,Pt;function xa(){if(Pt)return rr;Pt=1;var e=Ua(),r="Expected a function";function t(n,o){if(typeof n!="function"||o!=null&&typeof o!="function")throw new TypeError(r);var a=function(){var i=arguments,u=o?o.apply(this,i):i[0],c=a.cache;if(c.has(u))return c.get(u);var s=n.apply(this,i);return a.cache=c.set(u,s)||c,s};return a.cache=new(t.Cache||e),a}return t.Cache=e,rr=t,rr}var tr,St;function Ka(){if(St)return tr;St=1;var e=xa(),r=500;function t(n){var o=e(n,function(i){return a.size===r&&a.clear(),i}),a=o.cache;return o}return tr=t,tr}var nr,jt;function Ja(){if(jt)return nr;jt=1;var e=Ka(),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(r,function(i,u,c,s){a.push(c?s.replace(t,"$1"):u||i)}),a});return nr=n,nr}var ar,It;function Wa(){if(It)return ar;It=1;function e(r,t){for(var n=-1,o=r==null?0:r.length,a=Array(o);++n<o;)a[n]=t(r[n],n,r);return a}return ar=e,ar}var or,Mt;function Xa(){if(Mt)return or;Mt=1;var e=qr(),r=Wa(),t=mr(),n=Cr(),o=e?e.prototype:void 0,a=o?o.toString:void 0;function i(u){if(typeof u=="string")return u;if(t(u))return r(u,i)+"";if(n(u))return a?a.call(u):"";var c=u+"";return c=="0"&&1/u==-1/0?"-0":c}return or=i,or}var ir,Bt;function Za(){if(Bt)return ir;Bt=1;var e=Xa();function r(t){return t==null?"":e(t)}return ir=r,ir}var sr,At;function Ya(){if(At)return sr;At=1;var e=mr(),r=ba(),t=Ja(),n=Za();function o(a,i){return e(a)?a:r(a,i)?[a]:t(n(a))}return sr=o,sr}var ur,Ft;function Qa(){if(Ft)return ur;Ft=1;var e=Cr();function r(t){if(typeof t=="string"||e(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return ur=r,ur}var cr,Dt;function eo(){if(Dt)return cr;Dt=1;var e=Ya(),r=Qa();function t(n,o){o=e(o,n);for(var a=0,i=o.length;n!=null&&a<i;)n=n[r(o[a++])];return a&&a==i?n:void 0}return cr=t,cr}var lr,kt;function ro(){if(kt)return lr;kt=1;var e=eo();function r(t,n,o){var a=t==null?void 0:e(t,n);return a===void 0?o:a}return lr=r,lr}var $t;function Vn(){return $t||($t=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getTranslationValueFromContent=e.getTranslationValue=void 0;const t=C.__importDefault(ro()),n=(a,i,u)=>{const c=a[u];return c?(0,e.getTranslationValueFromContent)(c,i):null};e.getTranslationValue=n;const o=(a,i)=>{let u=a[i];if(!u){const c=i.split(".");c.length>1&&(u=(0,t.default)(a,c,null))}return typeof u=="string"?u:null};e.getTranslationValueFromContent=o}(de)),de}var Nt;function to(){if(Nt)return H;Nt=1,Object.defineProperty(H,"__esModule",{value:!0}),H.Translator=void 0;const e=Vn();class r{constructor(n,o){E(this,"locale");E(this,"translationsGetter");E(this,"localeLookupOrderedTranslations",null);E(this,"cache",new Map);this.locale=n,this.translationsGetter=o}async init(){this.localeLookupOrderedTranslations=await this.translationsGetter.getTranslationsByLocaleLookupOrder(this.locale)}translate(n){if(!this.localeLookupOrderedTranslations)throw new Error("TranslationLookup not initialized");let o=this.cache.get(n);if(o===void 0){for(const{translations:a}of this.localeLookupOrderedTranslations){const i=(0,e.getTranslationValueFromContent)(a,n);if(i!==null){o=i;break}}o=o??null,this.cache.set(n,o)}return o}}return H.Translator=r,H}var V={},Lt;function no(){if(Lt)return V;Lt=1,Object.defineProperty(V,"__esModule",{value:!0}),V.ensureLocale=void 0;const e=Nn(),r=new Set(e.FORGE_SUPPORTED_LOCALE_CODES),t={"en-UK":"en-GB","nb-NO":"no-NO"},n=e.FORGE_SUPPORTED_LOCALE_CODES.reduce((a,i)=>{const[u]=i.split("-");return a[u]||(a[u]=i),a},{nb:"no-NO",pt:"pt-PT"}),o=a=>{const i=a.replace("_","-");return r.has(i)?i:n[i]??t[i]??null};return V.ensureLocale=o,V}var fr={},Gt;function ao(){return Gt||(Gt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extractI18nPropertiesFromModules=e.extractI18nKeysFromModules=e.getI18nSupportedModuleEntries=void 0;const r=s=>typeof s=="object"&&s!==null&&!Array.isArray(s),t=s=>typeof(s==null?void 0:s.i18n)=="string",n=s=>s.startsWith("connect-"),o=s=>s.startsWith("core:"),a=s=>{const l=new Set,f=(h,d)=>!r(h)||l.has(h)?[]:(l.add(h),Object.entries(h).flatMap(([v,_])=>{const y=[...d,v];return t(_)?[{propertyPath:y,key:_.i18n}]:Array.isArray(_)?_.flatMap(b=>f(b,y)):f(_,y)}));return f(s,[])},i=s=>Object.entries(s).flatMap(([l,f])=>!n(l)&&!o(l)&&f&&Array.isArray(f)&&f.length>0?f.map(h=>[h,l]):[]);e.getI18nSupportedModuleEntries=i;const u=s=>{const l=new Set;for(const f of(0,e.getI18nSupportedModuleEntries)(s)){const h=a(f[0]);for(const{key:d}of h)l.add(d)}return l.size>0?Array.from(l):[]};e.extractI18nKeysFromModules=u;const c=s=>{const l=[];for(const f of(0,e.getI18nSupportedModuleEntries)(s)){const h=a(f[0]);for(const d of h)l.push({moduleName:f[1],...d})}return l};e.extractI18nPropertiesFromModules=c}(fr)),fr}var dr={},Ht;function oo(){return Ht||(Ht=1,Object.defineProperty(dr,"__esModule",{value:!0})),dr}var Vt;function zn(){return Vt||(Vt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getI18nSupportedModuleEntries=e.extractI18nPropertiesFromModules=e.extractI18nKeysFromModules=e.getTranslationValue=void 0;const r=C;r.__exportStar(Nn(),e),r.__exportStar(ha(),e),r.__exportStar(to(),e),r.__exportStar(no(),e);var t=Vn();Object.defineProperty(e,"getTranslationValue",{enumerable:!0,get:function(){return t.getTranslationValue}});var n=ao();Object.defineProperty(e,"extractI18nKeysFromModules",{enumerable:!0,get:function(){return n.extractI18nKeysFromModules}}),Object.defineProperty(e,"extractI18nPropertiesFromModules",{enumerable:!0,get:function(){return n.extractI18nPropertiesFromModules}}),Object.defineProperty(e,"getI18nSupportedModuleEntries",{enumerable:!0,get:function(){return n.getI18nSupportedModuleEntries}}),r.__exportStar(oo(),e)}(fe)),fe}var zt;function io(){if(zt)return G;zt=1,Object.defineProperty(G,"__esModule",{value:!0}),G.getContext=void 0;const e=p(),r=zn(),t=(0,e.getCallBridge)(),n=async()=>{var o;const a=await t("getContext"),i=a==null?void 0:a.locale;return i&&(a.locale=(o=(0,r.ensureLocale)(i))!==null&&o!==void 0?o:i),a};return G.getContext=n,G}var z={},Ut;function so(){if(Ut)return z;Ut=1,Object.defineProperty(z,"__esModule",{value:!0}),z.changeWindowTitle=void 0;const e=p(),r=g(),t=(0,e.getCallBridge)(),n=async o=>{try{await t("changeWindowTitle",o)}catch{throw new r.BridgeAPIError("the window title wasn't changed due to error.")}};return z.changeWindowTitle=n,z}var U={},xt;function uo(){if(xt)return U;xt=1,Object.defineProperty(U,"__esModule",{value:!0}),U.theme=void 0;const r=(0,p().getCallBridge)();return U.theme={enable:()=>r("enableTheming")},U}var x={},K={},hr={},P={},Kt;function Un(){if(Kt)return P;Kt=1,Object.defineProperty(P,"__esModule",{value:!0}),P.blobToBase64=P.base64ToBlob=void 0;const e=(t,n)=>{if(!t)return null;const o=t.includes(";base64")?t.split(",")[1]:t,a=atob(o),i=new Array(a.length);for(let c=0;c<a.length;c++)i[c]=a.charCodeAt(c);const u=new Uint8Array(i);return new Blob([u],{type:n})};P.base64ToBlob=e;const r=t=>new Promise((n,o)=>{const a=new FileReader;a.onloadend=()=>{n(a.result)},a.onerror=o,a.readAsDataURL(t)});return P.blobToBase64=r,P}var Jt;function co(){return Jt||(Jt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.containsSerialisedBlobs=e.containsBlobs=e.deserialiseBlobsInPayload=e.serialiseBlobsInPayload=void 0;const r=Un(),t=s=>{if(typeof s!="object"||s===null||Object.prototype.toString.call(s)!=="[object Object]")return!1;const l=Object.getPrototypeOf(s);if(l===null)return!0;const f=Object.prototype.hasOwnProperty.call(l,"constructor")&&l.constructor;return typeof f=="function"&&f instanceof f&&Function.prototype.call(f)===Function.prototype.call(s)},n=async s=>({data:await(0,r.blobToBase64)(s),type:s.type}),o=s=>(0,r.base64ToBlob)(s.data,s.type),a=async s=>{if(s instanceof Blob)return{...await n(s),__isBlobData:!0};if(Array.isArray(s))return Promise.all(s.map(l=>(0,e.serialiseBlobsInPayload)(l)));if(s&&t(s)){const l=await Promise.all(Object.entries(s).map(async([f,h])=>[f,await(0,e.serialiseBlobsInPayload)(h)]));return Object.fromEntries(l)}return s};e.serialiseBlobsInPayload=a;const i=s=>{if(s&&t(s)&&"__isBlobData"in s){const l=s;return o({data:l.data,type:l.type})}if(Array.isArray(s))return s.map(l=>(0,e.deserialiseBlobsInPayload)(l));if(s&&t(s)){const l={};for(const[f,h]of Object.entries(s))l[f]=(0,e.deserialiseBlobsInPayload)(h);return l}return s};e.deserialiseBlobsInPayload=i;const u=s=>s instanceof Blob?!0:Array.isArray(s)?s.some(l=>(0,e.containsBlobs)(l)):s&&t(s)?Object.values(s).some(l=>(0,e.containsBlobs)(l)):!1;e.containsBlobs=u;const c=s=>s&&t(s)&&"__isBlobData"in s?!0:Array.isArray(s)?s.some(l=>(0,e.containsSerialisedBlobs)(l)):s&&t(s)?Object.values(s).some(l=>(0,e.containsSerialisedBlobs)(l)):!1;e.containsSerialisedBlobs=c}(hr)),hr}var Wt;function xn(){if(Wt)return K;Wt=1,Object.defineProperty(K,"__esModule",{value:!0}),K.events=void 0;const e=p(),r=co(),t=(0,e.getCallBridge)(),n=async(a,i)=>{let u=i;return(0,r.containsBlobs)(i)&&(u=await(0,r.serialiseBlobsInPayload)(i)),t("emit",{event:a,payload:u})},o=(a,i)=>t("on",{event:a,callback:c=>{let s=c;return(0,r.containsSerialisedBlobs)(c)&&(s=(0,r.deserialiseBlobsInPayload)(c)),i(s)}});return K.events={emit:n,on:o},K}var Xt;function lo(){if(Xt)return x;Xt=1,Object.defineProperty(x,"__esModule",{value:!0}),x.emitReadyEvent=void 0;const e=xn(),r=Kn(),t="EXTENSION_READY",n=async()=>{const o=await r.view.getContext();await e.events.emit(t,{localId:o.localId})};return x.emitReadyEvent=n,x}var Zt;function Kn(){if(Zt)return D;Zt=1,Object.defineProperty(D,"__esModule",{value:!0}),D.view=void 0;const e=ca(),r=la(),t=fa(),n=da(),o=io(),a=so(),i=uo(),u=lo();return D.view={submit:e.submit,close:r.close,refresh:t.refresh,createHistory:n.createHistory,getContext:o.getContext,theme:i.theme,changeWindowTitle:a.changeWindowTitle,emitReadyEvent:u.emitReadyEvent},D}var Yt;function Jn(){return Yt||(Yt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),C.__exportStar(Kn(),e)}(le)),le}var _r={},J={},Qt;function fo(){if(Qt)return J;Qt=1,Object.defineProperty(J,"__esModule",{value:!0}),J.router=void 0;const r=(0,p().getCallBridge)(),t=async a=>{if(typeof a=="string")return r("navigate",{url:a,type:"same-tab"});if(!(a!=null&&a.target))throw new Error("target is required for navigation");return r("navigate",{...a,type:"same-tab"})},n=async a=>{if(typeof a=="string")return r("navigate",{url:a,type:"new-tab"});if(!(a!=null&&a.target))throw new Error("target is required for navigation");return r("navigate",{...a,type:"new-tab"})},o=async()=>r("reload");return J.router={navigate:t,open:n,reload:o},J}var en;function ho(){return en||(en=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),C.__exportStar(fo(),e)}(_r)),_r}var vr={},W={},rn;function _o(){if(rn)return W;rn=1,Object.defineProperty(W,"__esModule",{value:!0}),W.Modal=void 0;const e=p(),r=g(),t=(0,e.getCallBridge)(),n=()=>{};class o{constructor(i){var u,c;this.resource=(i==null?void 0:i.resource)||null,this.onClose=(i==null?void 0:i.onClose)||n,this.size=(i==null?void 0:i.size)||"medium",this.context=(i==null?void 0:i.context)||{},this.closeOnEscape=(u=i==null?void 0:i.closeOnEscape)!==null&&u!==void 0?u:!0,this.closeOnOverlayClick=(c=i==null?void 0:i.closeOnOverlayClick)!==null&&c!==void 0?c:!0}async open(){try{if(await t("openModal",{resource:this.resource,onClose:this.onClose,size:this.size,context:this.context,closeOnEscape:this.closeOnEscape,closeOnOverlayClick:this.closeOnOverlayClick})===!1)throw new r.BridgeAPIError("Unable to open modal.")}catch{throw new r.BridgeAPIError("Unable to open modal.")}}}return W.Modal=o,W}var tn;function vo(){return tn||(tn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),C.__exportStar(_o(),e)}(vr)),vr}var O={},X={},nn;function yo(){if(nn)return X;nn=1,Object.defineProperty(X,"__esModule",{value:!0}),X.productFetchApi=void 0;const e=Un(),r=async o=>{const a={};for(const[i,u]of o.entries())if(i==="file"){const c=u.name,s=u.type;a.file=await(0,e.blobToBase64)(u),a.__fileName=c,a.__fileType=s}else a[i]=u;return JSON.stringify(a)},t=async o=>{const a=(o==null?void 0:o.body)instanceof FormData,i=a?await r(o==null?void 0:o.body):o==null?void 0:o.body,u=new Request("",{body:i,method:o==null?void 0:o.method,headers:o==null?void 0:o.headers}),c=Object.fromEntries(u.headers.entries());return{body:u.method!=="GET"?await u.text():null,headers:new Headers(c),isMultipartFormData:a}},n=o=>{const a=async(i,u,c)=>{const{body:s,headers:l,isMultipartFormData:f}=await t(c);l.has("X-Atlassian-Token")||l.set("X-Atlassian-Token","no-check");const h={product:i,restPath:u,fetchRequestInit:{...c,body:s,headers:[...l.entries()]},isMultipartFormData:f},{body:d,headers:v,statusText:_,status:y,isAttachment:b}=await o("fetchProduct",h),w=b?(0,e.base64ToBlob)(d,v["content-type"]):d;return new Response(w||null,{headers:v,status:y,statusText:_})};return{requestConfluence:(i,u)=>a("confluence",i,u),requestJira:(i,u)=>a("jira",i,u),requestBitbucket:(i,u)=>a("bitbucket",i,u)}};return X.productFetchApi=n,X}var an;function po(){if(an)return O;an=1;var e;Object.defineProperty(O,"__esModule",{value:!0}),O.requestBitbucket=O.requestJira=O.requestConfluence=void 0;const r=p();return e=(0,yo().productFetchApi)((0,r.getCallBridge)()),O.requestConfluence=e.requestConfluence,O.requestJira=e.requestJira,O.requestBitbucket=e.requestBitbucket,O}var yr={},Z={},on;function bo(){if(on)return Z;on=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.showFlag=void 0;const e=p(),r=g(),t=(0,e.getCallBridge)(),n=o=>{var a;if(!o.id)throw new r.BridgeAPIError('"id" must be defined in flag options');const i=t("showFlag",{...o,type:(a=o.type)!==null&&a!==void 0?a:"info"});return{close:async()=>(await i,t("closeFlag",{id:o.id}))}};return Z.showFlag=n,Z}var sn;function go(){return sn||(sn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.showFlag=void 0;var r=bo();Object.defineProperty(e,"showFlag",{enumerable:!0,get:function(){return r.showFlag}})}(yr)),yr}var pr={},un;function wo(){return un||(un=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),C.__exportStar(xn(),e)}(pr)),pr}var q={},cn;function mo(){if(cn)return q;cn=1,Object.defineProperty(q,"__esModule",{value:!0}),q.createTranslationFunction=q.getTranslations=q.resetTranslationsCache=void 0;const e=zn(),r=Jn(),t={getI18nInfoConfig:async()=>{const u=await fetch(`./${e.I18N_BUNDLE_FOLDER_NAME}/${e.I18N_INFO_FILE_NAME}`);if(!u.ok)throw new Error("Failed to get i18n info config: "+u.statusText);return(await u.json()).config},getTranslationResource:async u=>{const c=await fetch(`./${e.I18N_BUNDLE_FOLDER_NAME}/${u}.json`);if(!c.ok)throw new Error(`Failed to get translation resource for locale: ${u}`);return c.json()}},n=new e.TranslationsGetter(t),o=()=>{n.reset()};q.resetTranslationsCache=o;const a=async(u=null,c={fallback:!0})=>{let s=u;return s||(s=(await r.view.getContext()).locale),await n.getTranslations(s,c)};q.getTranslations=a;const i=async(u=null)=>{let c=u;c||(c=(await r.view.getContext()).locale);const s=new e.Translator(c,n);return await s.init(),(l,f)=>{var h,d;return(d=(h=s.translate(l))!==null&&h!==void 0?h:f)!==null&&d!==void 0?d:l}};return q.createTranslationFunction=i,q}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.i18n=e.NavigationTarget=void 0;const r=C;var t=te;Object.defineProperty(e,"NavigationTarget",{enumerable:!0,get:function(){return t.NavigationTarget}}),r.__exportStar(oa(),e),r.__exportStar(ua(),e),r.__exportStar(Jn(),e),r.__exportStar(ho(),e),r.__exportStar(vo(),e),r.__exportStar(po(),e),r.__exportStar(go(),e),r.__exportStar(wo(),e),e.i18n=r.__importStar(mo())})(R);async function Wn(e){var n,o,a,i;let r=(o=(n=e==null?void 0:e.extension)==null?void 0:n.issue)==null?void 0:o.id;const t=(i=(a=e==null?void 0:e.extension)==null?void 0:a.issue)==null?void 0:i.key;if(!r&&!t)throw new Error("Missing issue ID and key in context");if(!r&&t){const u=`/rest/api/2/issue/${t}?fields=id`,c=await R.requestJira(u,{method:"GET",headers:{Accept:"application/json"}});if(c.status!==200)throw new Error(`Failed to fetch issue ID for key ${t}: ${c.status}`);if(r=(await c.json()).id,!r)throw new Error(`No issue ID found for key ${t}`)}return r}async function Co(e){var r;if(!e||typeof e!="string")return{error:"Invalid or missing filename"};try{const t=await R.view.getContext(),o=`/rest/api/2/issue/${await Wn(t)}?fields=attachment`,a=await R.requestJira(o,{method:"GET",headers:{Accept:"application/json"}});if(a.status!==200)return{error:`Failed to fetch attachments: ${a.status}`};const c=(((r=(await a.json()).fields)==null?void 0:r.attachment)||[]).find(_=>_.filename===e);if(!c)return{error:`No attachment found with filename ${e}`};const l=c.content.match(/\/content\/(\d+)/),f=l==null?void 0:l[1];if(!f)return{error:"Invalid attachment content URL"};const h=`/rest/api/2/attachment/content/${f}`,d=await R.requestJira(h,{method:"GET",headers:{Accept:"application/json"}});if(d.status!==200){const _=await d.text();return console.error(`Failed to fetch attachment content: ${_}`),{error:`Failed to fetch attachment content: ${d.status}`}}const v=await Qn(await d.text());return{attachmentId:f,content:v}}catch(t){return console.error(`Error reading JSON attachment: ${t.message}`),{error:t.message}}}async function Eo(e,r,t){if(!e||typeof e!="object")return{success:!1,error:"Invalid or missing data object"};if(!r||typeof r!="string")return{success:!1,error:"Invalid or missing filename"};try{const n=await R.view.getContext(),o=await Wn(n),a=JSON.stringify(e,null,2),i=new Blob([a],{type:"application/json"}),u=new FormData;u.append("file",i,r);const c=`/rest/api/3/issue/${o}/attachments`,s=await R.requestJira(c,{method:"POST",headers:{Accept:"application/json","X-Atlassian-Token":"no-check"},body:u});if(s.status!==200){const f=await s.text();return console.error(`Failed to upload attachment: ${f}`),{success:!1,error:`Failed to upload attachment: ${s.status}`}}if(console.info("delete attachment id ",t),t&&!isNaN(parseInt(t))){const f=await R.requestJira(`/rest/api/3/attachment/${t}`,{method:"DELETE",headers:{Accept:"application/json"}});f.status!==204&&console.warn(`Failed to delete old attachment ${t}: ${f.status}`)}return{success:!0,attachmentId:(await s.json())[0].id}}catch(n){return console.error(`Error writing JSON attachment: ${n.message}`),{success:!1,error:n.message}}}const Ro="Attachment";export{Co as readJsonAttachment,Ro as type,Eo as writeObjectToJsonAttachment};
